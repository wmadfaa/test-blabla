{"version":3,"file":"event-emitter.js","sourceRoot":"","sources":["../../../src/service/event-emitter/event-emitter.ts"],"names":[],"mappings":"AAGA,MAAM,OAAO,YAAY;IAAzB;QACU,cAAS,GAEb,EAAE,CAAC;QAEA,OAAE,GAAG,CAAC,IAAY,EAAE,EAAgC,EAAY,EAAE;YACvE,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACrC,IAAI,CAAC,SAAS,EAAE;gBACd,SAAS,GAAG,EAAE,CAAC;gBACf,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC;aAClC;YACD,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACnB,OAAO,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QAClC,CAAC,CAAC;QAEK,QAAG,GAAG,CACX,IAAY,EACZ,EAAgC,EACjB,EAAE;YACjB,IAAI,CAAC,IAAI,CAAC,SAAS;gBAAE,OAAO;YAC5B,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACvC,IAAI,CAAC,SAAS;gBAAE,OAAO;YACvB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC;YACvD,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;QACrC,CAAC,CAAC;QAEK,SAAI,GAAG,CAAC,IAAY,EAAE,IAAkB,EAAQ,EAAE;YACvD,IAAI,CAAC,IAAI,CAAC,SAAS;gBAAE,OAAO;YAC5B,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACvC,IAAI,CAAC,SAAS;gBAAE,OAAO;YACvB,SAAS,CAAC,OAAO,CAAC,KAAK,EAAC,EAAE,EAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;QAC1C,CAAC,CAAC;IACJ,CAAC;CAAA","sourcesContent":["/* eslint-disable import/extensions */\nimport { IPriceTicker } from '../types';\n\nexport class EventEmitter {\n  private listeners: {\n    [type: string]: Array<(data: IPriceTicker) => void>;\n  } = {};\n\n  public on = (type: string, fn: (data: IPriceTicker) => void): Function => {\n    let listeners = this.listeners[type];\n    if (!listeners) {\n      listeners = [];\n      this.listeners[type] = listeners;\n    }\n    listeners.push(fn);\n    return () => this.off(type, fn);\n  };\n\n  public off = (\n    type: string,\n    fn: (data: IPriceTicker) => void\n  ): number | void => {\n    if (!this.listeners) return;\n    const listeners = this.listeners[type];\n    if (!listeners) return;\n    this.listeners[type] = listeners.filter(f => f !== fn);\n    return this.listeners[type].length;\n  };\n\n  public emit = (type: string, data: IPriceTicker): void => {\n    if (!this.listeners) return;\n    const listeners = this.listeners[type];\n    if (!listeners) return;\n    listeners.forEach(async fn => fn(data));\n  };\n}\n"]}